<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="app.bbs.mapper.BbsMapper">
  <select id="count" resultType="int">
    SELECT
      COUNT(*)
    FROM bbs
  </select>

  <select id="list" resultType="app.bbs.vo.BbsVO">
    SELECT
      *
    FROM bbs
    LIMIT 0, 10
  </select>

  <select id="read" parameterType="int" resultType="app.bbs.vo.BbsVO">
    SELECT
      *
    FROM bbs
    WHERE 
      idx = #{idx}
  </select>

  <insert id="write" parameterType="app.bbs.vo.BbsVO">
    INSERT INTO 
    bbs 
      (idx, account_idx, category, title, content, readcount)
    VALUES 
      (#{idx}, #{account_idx}, "game", #{title}, #{content}, 0);
  </insert>

  <update id="update" parameterType="app.bbs.vo.BbsVO">
    UPDATE bbs
      SET
    <if test="title != null">
      title = #{title}
    </if>

    <if test="title != null and content != null"> , </if>
    <if test="content != null">
      content = #{content}
    </if>
    WHERE
      idx = #{idx}
  </update>

  <delete id="delete" parameterType="int">
    DELETE 
      FROM bbs
    WHERE
      idx = #{idx}
  </delete>

</mapper>